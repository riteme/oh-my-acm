带修莫队：把时间当成一维，排序时左右端点的块和时间一起排序，模拟时间。

树上莫队：按照欧拉序，如果询问x,y,若lca(x,y)=x，则查询st[x]到st[y]，否则ed[x],st[y]，再加上lca，出现两次的点不算。